!function(){function e(){o.parent().toggleClass("ishidden"),l.parent().toggleClass("ishidden"),h.toggleClass("ishidden"),m.toggleClass("ishidden"),p.toggleClass("ishidden"),i()}function i(){g.addClass("ishidden"),c.addClass("ishidden"),f.addClass("ishidden")}function n(e){for(var i=e.indexOf("@"),n=(e.indexOf("priceline.com")>-1,e.substring(0,i)),s=n.split("."),r=s.length>1,t=s.length-1;t>=0;t--)if(s[t].trim().length<1){r=!1;break}return r}var s,r,t=$("#signin-modal"),a=t.find("form"),d=t.find("#register-message"),l=t.find("#register-message a"),o=t.find("#login-message a"),g=t.find("#login-error"),f=t.find("#passport-error"),c=t.find("#register-error"),h=t.find("#signin"),m=t.find("#register"),p=t.find('input[name="password-confirm"]'),u=location.search.substring(1),v={"00":"Incorrect username.","01":"Incorrect password.","02":"User email is invalid.","03":"User already exists.","04":"Check your email to complete your registration!"};u.length>0&&(s=JSON.parse('{"'+decodeURI(u).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),r=s&&s.e,s&&s.e&&f.text(v[s.e]).removeClass("ishidden"),r&&"04"==s.e&&(a.hide(),d.hide())),a.submit(function(e){var s=$(this),r=s.find('input[name="username"]').val(),t=s.find('input[name="password"]').val();if(i(),"/api/login"==a.attr("action")){if(void 0==r||0==r.trim().length||void 0==t||0==t.trim().length||!n(r))return g.removeClass("ishidden"),!1}else if(void 0==r||0==r.trim().length||void 0==t||0==t.trim().length||t!=p.val()||!n(r))return c.removeClass("ishidden"),!1}),l.click(function(i){i.preventDefault(),e(),a.attr("action","/api/signup")}),o.click(function(i){i.preventDefault(),e(),a.attr("action","/api/login")})}();