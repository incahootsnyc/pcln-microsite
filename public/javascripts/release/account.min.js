!function(){function e(){g.parent().toggleClass("ishidden"),c.parent().toggleClass("ishidden"),v.toggleClass("ishidden"),C.toggleClass("ishidden"),w.toggleClass("ishidden"),i()}function i(){m.addClass("ishidden"),h.addClass("ishidden"),p.addClass("ishidden")}function n(e){for(var i=void 0!=e&&e.trim().length>0,n=e.indexOf("@"),s=(e.indexOf("priceline.com")>-1,e.substring(0,n)),r=s.split("."),t=r.length>1,a=r.length-1;a>=0;a--)if(r[a].trim().length<1){t=!1;break}return i&&t}function s(e){return void 0!=e&&e.trim().length>6}var r=$("#reset-password-form");if(r.length>0)r.submit(function(){var e=$('input[name="password-confirm"]').val(),i=$('input[name="password"]').val();if(!s(i)||i!=e)return!1});else{var t,a,o=$("#signin-modal"),d=$("#reset-password"),l=o.find("form"),f=o.find("#register-message"),c=o.find("#register-message a"),g=o.find("#login-message a"),u=o.find("#forgot-password a"),m=o.find("#login-error"),p=o.find("#passport-error"),h=o.find("#register-error"),v=o.find("#signin"),C=o.find("#register"),w=o.find('input[name="password-confirm"]'),b=d.find("#reset-error"),k=location.search.substring(1),y={"00":"Incorrect username.","01":"Incorrect password.","02":"User email is invalid.","03":"User already exists.","04":"Check your email to complete your registration!","05":"User could not be found.","06":"Oops, something went wrong. Please try again.","07":"Check your email to complete password reset!"};k.length>0&&(t=JSON.parse('{"'+decodeURI(k).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),a=t&&t.e,t&&t.e&&p.text(y[t.e]).removeClass("ishidden"),!a||"04"!=t.e&&"07"!=t.e||(l.hide(),f.hide())),l.submit(function(e){var r=$(this),t=r.find('input[name="username"]').val(),a=r.find('input[name="password"]').val();if(i(),"/api/login"==l.attr("action")){if(!s(a)||!n(t))return m.removeClass("ishidden"),!1}else if(!s(a)||a!=w.val()||!n(t))return h.removeClass("ishidden"),!1}),c.click(function(i){i.preventDefault(),e(),l.attr("action","/api/signup")}),g.click(function(i){i.preventDefault(),e(),l.attr("action","/api/login")}),u.click(function(e){e.preventDefault();var i=d.find(".modal__close");d.find("form").submit(function(){var e=$(this),i=e.find('input[name="username"]').val();if(!n(i))return b.removeClass("ishidden"),!1}),i.click(function(){o.show(),b.addClass("ishidden"),d.hide()}),o.hide(),d.show()})}}();