!function(){function e(){h.parent().toggleClass("ishidden"),c.parent().toggleClass("ishidden"),v.toggleClass("ishidden"),C.toggleClass("ishidden"),w.toggleClass("ishidden"),i()}function i(){m.addClass("ishidden"),p.addClass("ishidden"),u.addClass("ishidden")}function s(e){for(var i=void 0!=e&&e.trim().length>0,s=e.indexOf("@"),n=(e.indexOf("priceline.com")>-1,e.substring(0,s)),r=n.split("."),a=r.length>1,t=r.length-1;t>=0;t--)if(r[t].trim().length<1){a=!1;break}return i&&a}function n(e){return void 0!=e&&e.trim().length>6}var r=$("#reset-password-form");if(r.length>0)r.submit(function(){var e=$('input[name="password-confirm"]').val(),i=$('input[name="password"]').val(),s=$(".reset-password__error-message");return n(i)&&i==e?void $(this).find(".loader--white").removeClass("ishidden"):(s.removeClass("ishidden"),!1)});else{var a,t,d=$("#signin-modal"),o=$("#reset-password"),l=d.find("form"),f=d.find("#register-message"),c=d.find("#register-message a"),h=d.find("#login-message a"),g=d.find("#forgot-password a"),m=d.find("#login-error"),u=d.find("#passport-error"),p=d.find("#register-error"),v=d.find("#signin"),C=d.find("#register"),w=d.find('input[name="password-confirm"]'),b=o.find("#reset-error"),k=location.search.substring(1),y={"00":"Incorrect username.","01":"Incorrect password.","02":"User email is invalid.","03":"User already exists.","04":"Check your email to complete your registration!","05":"User could not be found.","06":"Oops, something went wrong. Please try again.","07":"Check your email to complete password reset!"};k.length>0&&(a=JSON.parse('{"'+decodeURI(k).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),t=a&&a.e,a&&a.e&&u.text(y[a.e]).removeClass("ishidden"),!t||"04"!=a.e&&"07"!=a.e||(l.hide(),f.hide())),l.submit(function(e){var r=$(this),a=r.find('input[name="username"]').val(),t=r.find('input[name="password"]').val();if(i(),"/api/login"==l.attr("action")){if(!n(t)||!s(a))return m.removeClass("ishidden"),!1;v.find(".loader--white").removeClass("ishidden")}else{if(!n(t)||t!=w.val()||!s(a))return p.removeClass("ishidden"),!1;C.find(".loader--white").removeClass("ishidden")}}),c.click(function(i){i.preventDefault(),e(),l.attr("action","/api/signup")}),h.click(function(i){i.preventDefault(),e(),l.attr("action","/api/login")}),g.click(function(e){e.preventDefault();var i=o.find(".modal--resetpw__close");o.find("form").submit(function(){var e=$(this),i=e.find('input[name="username"]').val();return s(i)?void $(this).find(".loader--white").removeClass("ishidden"):(b.removeClass("ishidden"),!1)}),i.click(function(){d.show(),b.addClass("ishidden"),o.hide()}),d.hide(),o.show()})}}();