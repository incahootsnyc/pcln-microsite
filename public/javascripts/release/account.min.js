!function(){function e(){h.parent().toggleClass("ishidden"),c.parent().toggleClass("ishidden"),v.toggleClass("ishidden"),C.toggleClass("ishidden"),w.toggleClass("ishidden"),i()}function i(){u.addClass("ishidden"),p.addClass("ishidden"),m.addClass("ishidden")}function n(e){for(var i=void 0!=e&&e.trim().length>0,n=e.indexOf("@"),s=(e.indexOf("priceline.com")>-1,e.substring(0,n)),r=s.split("."),t=r.length>1,a=r.length-1;a>=0;a--)if(r[a].trim().length<1){t=!1;break}return i&&t}function s(e){return void 0!=e&&e.trim().length>6}var r=$("#reset-password-form");if(r.length>0)r.submit(function(){var e=$('input[name="password-confirm"]').val(),i=$('input[name="password"]').val();return!(!s(i)||i!=e)&&void $(this).find(".loader--white").removeClass("ishidden")});else{var t,a,d=$("#signin-modal"),o=$("#reset-password"),l=d.find("form"),f=d.find("#register-message"),c=d.find("#register-message a"),h=d.find("#login-message a"),g=d.find("#forgot-password a"),u=d.find("#login-error"),m=d.find("#passport-error"),p=d.find("#register-error"),v=d.find("#signin"),C=d.find("#register"),w=d.find('input[name="password-confirm"]'),b=o.find("#reset-error"),k=location.search.substring(1),y={"00":"Incorrect username.","01":"Incorrect password.","02":"User email is invalid.","03":"User already exists.","04":"Check your email to complete your registration!","05":"User could not be found.","06":"Oops, something went wrong. Please try again.","07":"Check your email to complete password reset!"};k.length>0&&(t=JSON.parse('{"'+decodeURI(k).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),a=t&&t.e,t&&t.e&&m.text(y[t.e]).removeClass("ishidden"),!a||"04"!=t.e&&"07"!=t.e||(l.hide(),f.hide())),l.submit(function(e){var r=$(this),t=r.find('input[name="username"]').val(),a=r.find('input[name="password"]').val();if(i(),"/api/login"==l.attr("action")){if(!s(a)||!n(t))return u.removeClass("ishidden"),!1;v.find(".loader--white").removeClass("ishidden")}else{if(!s(a)||a!=w.val()||!n(t))return p.removeClass("ishidden"),!1;C.find(".loader--white").removeClass("ishidden")}}),c.click(function(i){i.preventDefault(),e(),l.attr("action","/api/signup")}),h.click(function(i){i.preventDefault(),e(),l.attr("action","/api/login")}),g.click(function(e){e.preventDefault();var i=o.find(".modal--resetpw__close");o.find("form").submit(function(){var e=$(this),i=e.find('input[name="username"]').val();return n(i)?void $(this).find(".loader--white").removeClass("ishidden"):(b.removeClass("ishidden"),!1)}),i.click(function(){d.show(),b.addClass("ishidden"),o.hide()}),d.hide(),o.show()})}}();