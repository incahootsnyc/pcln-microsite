!function(){function e(){u.parent().toggleClass("ishidden"),c.parent().toggleClass("ishidden"),v.toggleClass("ishidden"),C.toggleClass("ishidden"),w.toggleClass("ishidden"),i()}function i(){m.addClass("ishidden"),p.addClass("ishidden"),g.addClass("ishidden")}function n(e){for(var i=void 0!=e&&e.trim().length>0,n=e.indexOf("@"),s=(e.indexOf("priceline.com")>-1,e.substring(0,n)),r=s.split("."),a=r.length>1,d=r.length-1;d>=0;d--)if(r[d].trim().length<1){a=!1;break}return i&&a}function s(e){return void 0!=e&&e.trim().length>6}var r=$("#reset-password-form");if(r.length>0)r.submit(function(){var e=$('input[name="password-confirm"]').val(),i=$('input[name="password"]').val(),n=$(".reset-password__error-message");return s(i)&&i==e?void $(this).find(".loader--white").removeClass("ishidden"):(n.removeClass("ishidden"),!1)});else{var a,d,t=$("#signin-modal"),o=$("#reset-password"),l=t.find("form"),f=t.find("#register-message"),c=t.find("#register-message a"),u=t.find("#login-message a"),h=t.find("#forgot-password a"),m=t.find("#login-error"),g=t.find("#passport-error"),p=t.find("#register-error"),v=t.find("#signin"),C=t.find("#register"),w=t.find('input[name="password-confirm"]'),b=o.find("#reset-error"),k=location.search.substring(1),y={"00":"Incorrect username.","01":"Incorrect password.","02":"User email is invalid.","03":"User already exists.","04":"Check your email to complete your registration!","05":"User could not be found.","06":"Oops, something went wrong. Please try again.","07":"Check your email to complete password reset!"};k.length>0&&(a=JSON.parse('{"'+decodeURI(k).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),d=a&&a.e,a&&a.e&&g.text(y[a.e]).removeClass("ishidden"),!d||"04"!=a.e&&"07"!=a.e||(l.hide(),f.hide())),l.submit(function(e){var r=$(this),a=r.find('input[name="username"]').val(),d=r.find('input[name="password"]').val();if(i(),"/api/login"==l.attr("action")){if(!s(d)||!n(a))return m.removeClass("ishidden"),!1;v.find(".loader--white").removeClass("ishidden")}else{if(!s(d)||d!=w.val()||!n(a))return p.removeClass("ishidden"),!1;C.find(".loader--white").removeClass("ishidden")}}),c.click(function(i){i.preventDefault(),e(),l.attr("action","/api/signup")}),u.click(function(i){i.preventDefault(),e(),l.attr("action","/api/login")}),h.click(function(e){e.preventDefault();var i=o.find(".modal--resetpw__close"),s=o.find("form");s.unbind("submit"),i.unbind("click"),s.submit(function(){var e=$(this),i=e.find('input[name="username"]').val();return n(i)?void $(this).find(".loader--white").removeClass("ishidden"):(b.removeClass("ishidden"),!1)}),i.click(function(){t.show(),b.addClass("ishidden"),o.hide()}),t.hide(),o.show()})}}();